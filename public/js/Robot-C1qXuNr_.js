import{_ as h}from"./GroupModal-BDkQSIqb.js";import{H as _}from"./Header-BzYHlVFw.js";import{_ as y}from"./ChatPanel-2ATjEKEu.js";import{M as x}from"./Menu-7mxd2fni.js";import{g as C}from"./ai-BAwTwO-P.js";import{au as w,av as M,ae as u,aM as b,ay as L,az as V,aA as i,aO as B,aC as I,ao as T}from"./vendor-1hORrrXR.js";import{g as q}from"./book-Dm6-ywUB.js";import"./Modal-D_0zYQnz.js";import"./RemixIcon-DLZgjpvL.js";import"./userInfo-BaXGolSQ.js";import"./user-CStxEDWN.js";import"./index-CA56zL0v.js";import"./Loading-DkgdyS7Z.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./message-ShWl2tYi.js";import"./utils-Cs41FaCi.js";const N=[{value:"tongyi",label:"通义千问"},{value:"qianfan",label:"文心一言"},{value:"moonshot",label:"月之暗面"}],O={class:"flex flex-col w-full h-screen"},S={class:"flex-1 flex flex-col w-full lg:pl-80 overflow-y-auto"},X={__name:"Robot",setup(k){const c=w(),m=M(),a=u([]),n=u(!1),r=u("tongyi"),l=u(""),t=u(!0),d=e=>{if(e!==void 0){t.value=e;return}t.value=!t.value},f=(e,o)=>{c.push({path:"/robot",query:{id:e,appId:o}}),l.value=e||"",e?q(e).then(s=>{a.value=JSON.parse(s.content||"[]")}):a.value=[]},p=e=>{n.value=!0,C(l.value,r.value,e).then(o=>{let{id:s,response:g}=o;l.value=s,n.value=!1,a.value=a.value.concat([{role:"user",content:e},{role:"assistant",content:g}])}).catch(o=>{n.value=!1,a.value=a.value.concat([{role:"assistant",content:o.message}])})},v=(e,o)=>{r.value=e,a.value&&a.value.length>0&&(c.push({path:"/robot",query:{id:"new",appId:m.query.appId}}),a.value=[],l.value="")};return b(m.query.id,(e,o)=>{l.value=e},{immediate:!0}),(e,o)=>(L(),V("div",O,[i(_,{onToggleFold:d,fold:t.value},{default:B(()=>[i(h,{class:"w-32 lg:w-48 mx-2",modelValue:r.value,"onUpdate:modelValue":[o[0]||(o[0]=s=>r.value=s),v],palaceHolder:"请选择模型",options:T(N)},null,8,["modelValue","options"])]),_:1},8,["fold"]),i(x,{fixedType:"chat",defaultGroup:!0,fold:t.value,defaultSelected:!1,onToggleFold:d,onMenuChange:f},null,8,["fold"]),I("div",S,[i(y,{editable:!0,messages:a.value,loading:n.value,onChart:p},null,8,["messages","loading"])])]))}};export{X as default};
