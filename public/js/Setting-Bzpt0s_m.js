import{H as w}from"./Header-C2ZRdA8X.js";import{_ as v}from"./ProInput-iqkAS6hM.js";import{ai as x,aj as b,aT as y,aD as m,aE as c,aH as r,aY as k,aR as V,aS as U,b4 as C,aF as d,at as u}from"./vendor-CWXOCgin.js";import{u as j,s as _}from"./userInfo-BH_HArD6.js";import{b as $}from"./index-B7emg1l8.js";import{u as B,a as A,b as F}from"./Fish-twJ8LYmt.js";import"./RemixIcon-CgHXNHMg.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"flex flex-col items-center justify-center"},M=["src"],R={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-16 h-16 text-gray-400 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},S=r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1),z=[S],D={class:"mt-2 text-sm text-gray-500"},L=x({__name:"AvatarUploader",props:{img:{type:String,default:""},upload:{type:Function,default:()=>null},rounded:{type:Boolean,default:!0}},emits:["remove"],setup(p,{emit:e}){const i=p,f=e,t=b(),s=b(""),o=async l=>{const n=l.target.files[0];if(!n)return;if(!["image/jpeg","image/png"].includes(n.type)){s.value="只允许上传jpeg/png格式的图片";return}if(n.size>2*1024*1024){s.value="图片上传大小不能超过2MB";return}if(i.upload&&await i.upload(n)){const g=new FileReader;g.onload=h=>{t.value=h.target&&h.target.result,s.value=""},g.readAsDataURL(n)}},a=()=>{t.value=null,s.value="",f("remove")};return y(()=>i.img,l=>{l&&(t.value=l)},{immediate:!0}),(l,n)=>(m(),c("div",H,[r("label",{for:"avatar",class:k(["cursor-pointer relative inline-block w-32 h-32 overflow-hidden bg-gray-200",{"border-4 border-dashed border-blue-500":!t.value,"rounded-full":p.rounded}])},[t.value?(m(),c("img",{key:0,src:t.value,class:"w-full h-full object-cover"},null,8,M)):(m(),c("svg",R,z)),r("input",{type:"file",id:"avatar",class:"hidden",accept:"image/*",onChange:o,"accept-charset":"utf-8"},null,32)],2),t.value?(m(),c("button",{key:0,class:"mt-4 px-4 py-1 bg-red-500 text-white rounded hover:bg-red-600",onClick:a}," 删除头像 ")):V("",!0),r("p",D,U(s.value),1)]))}}),N={class:"h-screen w-full flex flex-col overflow-y-auto"},T={class:"flex-1 flex flex-wrap justify-start bg-gray-300/20"},E={class:"flex flex-col w-full items-center max-w-screen-sm mx-auto bg-white p-8 lg:px-16"},X={__name:"Setting",setup(p){const e=j(),i=C(()=>{if(e.value&&e.value.avatar)return`${$}/file/preview?file=${e.value.avatar}`}),f=o=>B(e.value._id,o).then(a=>{a&&(e.value=a,_(a))}),t=()=>A(e.value).then(o=>{o&&(e.value=o,_(o))}),s=()=>{F(e.value)};return(o,a)=>(m(),c("div",N,[d(w,{hiddenFold:!0}),r("div",T,[r("div",E,[d(L,{upload:f,img:i.value,onRemove:t},null,8,["img"]),d(v,{class:"",name:"name",label:"用户名称",modelValue:u(e).name,"onUpdate:modelValue":a[0]||(a[0]=l=>u(e).name=l),placeholder:"请输入用户名称"},null,8,["modelValue"]),d(v,{class:"",name:"email",label:"邮箱",modelValue:u(e).email,"onUpdate:modelValue":a[1]||(a[1]=l=>u(e).email=l),placeholder:"请输入邮箱"},null,8,["modelValue"]),d(v,{class:"",name:"mobile",label:"手机号码",modelValue:u(e).mobile,"onUpdate:modelValue":a[2]||(a[2]=l=>u(e).mobile=l),placeholder:"请输入手机号码"},null,8,["modelValue"]),r("button",{class:"w-full py-2 lg:py-3 my-2 lg:my-3 bg-blue-300 lg:text-lg text-white font-semibold rounded-md shadow-md hover:bg-blue-600",onClick:s}," 保存 ")])])]))}};export{X as default};
