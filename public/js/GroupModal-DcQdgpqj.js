import{ay as k,aj as c,aW as j,ap as I,aN as W,az as n,aA as i,aD as B,aE as x,a_ as m,aH as H,a$ as y,aJ as D,aO as O,b2 as U,aG as h,aB as E,bd as F}from"./vendor-DqHIQWU1.js";import{_ as $,d as A}from"./index-bEem1MK9.js";import{i as C}from"./utils-DVDKZiQc.js";import{P as G}from"./ProInput-DLzwbHQE.js";var S=(e=>(e.markdown="富文本",e.text="文字",e.drawing="图画",e.task="待办",e.code="代码",e.link="链接",e.chat="对话",e))(S||{});const le=()=>k.get("/groups/getPortalAndBooks").then(e=>e&&e.data&&e.data.success?e.data.data:Promise.reject(e&&e.data&&e.data.message)),ne=(e,t)=>{let a="/groups/getAppShareGroupAndBooks",r;return t||(a="/groups/getAppGroupAndBooks",r={defaultGroup:e}),k.get(a,{params:r}).then(o=>o&&o.data&&o.data.success?o.data.data:Promise.reject(o&&o.data&&o.data.message))},re=e=>k.post("/groups/createGroup",e).then(t=>t&&t.data&&t.data.success?t.data.data:Promise.reject(t&&t.data&&t.data.message)),se=e=>k.post("/groups/updateGroup",e).then(t=>t&&t.data&&t.data.success?t.data.data:Promise.reject(t&&t.data&&t.data.message)),ue=e=>k.post("/groups/removeGroup",{id:e}).then(t=>t&&t.data&&t.data.success?t.data.data:Promise.reject(t&&t.data&&t.data.message)),J={class:"flex-1 pr-4"},L={key:0},q={key:1,class:"text-slate-300"},K=["onClick"],Q={key:1,class:"w-full px-2 py-1"},R={class:"w-full bg-white dark:bg-neutral-800"},X=["onClick"],Y={key:1,class:"w-full py-2 text-center"},M={__name:"ProSelect",props:{options:{type:Array,default:()=>[]},modelValue:String,palaceHolder:{type:String,default:"请选择"}},emits:["update:value"],setup(e,{emit:t}){const a=c(!0),r=c(),o=c(),u=c(""),p=c(C()),v=e,d=t,l=c(""),s=f=>{var g;l.value=f.label,d("update:modelValue",f.value),a.value=!0,(g=r==null?void 0:r.value)==null||g.hide()},T=()=>(a.value=!1,!0),P=()=>(a.value=!0,!0),z=()=>{if(!C())return!0;a.value=!1};return j(()=>v.modelValue,f=>{v.options.map(({value:g,label:w})=>{f===g&&(l.value=w)})},{immediate:!0}),I(()=>{u.value=`${o.value.clientWidth-14}px`}),(f,g)=>{const w=W("tippy");return n(),i("div",{ref_key:"select",ref:o,class:E(["flex p-2 bg-white text-slate-600 dark:text-slate-100 dark:bg-neutral-800 placeholder-slate-300 border rounded",{"outline-none ring-1 ring-blue-600 border-transparent":!a.value}]),onClick:z},[B("div",J,[l.value?(n(),i("span",L,x(l.value),1)):(n(),i("span",q,x(e.palaceHolder),1))]),p.value?(n(),m($,{key:0,class:"float-right hover:text-blue-500",name:a.value?"arrow-down-s-fill":"arrow-up-s-fill"},null,8,["name"])):H("",!0),p.value?(n(),m(A,{key:2,visible:!a.value,zIndex:100,footer:!1,"onUpdate:visible":P},{default:y(()=>[B("div",R,[e.options&&e.options.length?(n(!0),i(O,{key:0},U(e.options,(b,V)=>(n(),i("div",{key:V,class:"py-2 cursor-pointer hover:bg-blue-400 hover:text-slate-50 text-center dark:text-slate-100 rounded",onClick:N=>s(b)},x(b.label),9,X))),128)):(n(),i("div",Y," 暂无数据 "))])]),_:1},8,["visible"])):(n(),m(w,{key:1,ref_key:"dropdown",ref:r,trigger:"click",placement:"bottom-end",offset:[10,15],animation:"fade",interactive:!0,arrow:!1,triggerTarget:o.value,onShow:T,onHide:P},{content:y(()=>[B("div",{class:"text-slate-600 dark:text-slate-300 overflow-y-auto max-h-60",style:D({width:u.value})},[e.options&&e.options.length?(n(!0),i(O,{key:0},U(e.options,(b,V)=>(n(),i("div",{key:V,class:"w-full h-8 leading-8 px-2 rounded dark:rounded-none mb-1 hover:bg-neutral-100 cursor-pointer text-gray-700 dark:text-gray-200",onClick:N=>s(b)},x(b.label),9,K))),128)):(n(),i("div",Q," 暂无数据 "))],4)]),default:y(()=>[h($,{class:"float-right hover:text-blue-500",name:a.value?"arrow-down-s-fill":"arrow-up-s-fill"},null,8,["name"])]),_:1},8,["triggerTarget"]))],2)}}},Z={__name:"BookModal",props:{visible:{type:Boolean,default:!1},book:{type:Object,default:()=>({id:"",title:"",category:"",url:"",type:""})},categories:{type:Array,default:()=>[]},typeOptions:{type:Object,default:()=>Object.keys(S).filter(e=>!["chat","link"].includes(e)).map(e=>({label:S[e],value:e}))},fixedType:{type:String,default:""}},emits:["update:book","confirm","cancel"],setup(e,{emit:t}){const a=e,r=F(()=>a.categories.map(d=>({label:d.name,value:d.id}))),o=t,u=c(a.visible),p=()=>{o("confirm"),u.value=!1},v=()=>{o("cancel"),u.value=!1};return j(()=>a.visible,()=>{u.value=a.visible}),(d,l)=>(n(),m(A,{visible:u.value,"onUpdate:visible":l[4]||(l[4]=s=>u.value=s),onConfirm:p,onCancel:v},{default:y(()=>[h(G,{class:"my-2",name:"title",modelValue:e.book.title,"onUpdate:modelValue":l[0]||(l[0]=s=>e.book.title=s),placeholder:"请输入书名",border:""},null,8,["modelValue"]),h(M,{class:"my-2",modelValue:e.book.category,"onUpdate:modelValue":l[1]||(l[1]=s=>e.book.category=s),options:r.value},null,8,["modelValue","options"]),e.fixedType==="link"?(n(),m(G,{key:0,class:"my-2",name:"url",modelValue:e.book.url,"onUpdate:modelValue":l[2]||(l[2]=s=>e.book.url=s),placeholder:"请输入链接(http://www.xxxx.com)"},null,8,["modelValue"])):e.fixedType?H("",!0):(n(),m(M,{key:1,class:"my-2",modelValue:e.book.type,"onUpdate:modelValue":l[3]||(l[3]=s=>e.book.type=s),options:e.typeOptions},null,8,["modelValue","options"]))]),_:1},8,["visible"]))}},de=Z,_={__name:"GroupModal",props:{visible:{type:Boolean,default:!1},title:{type:String,default:"新增分类"},group:{type:Object,default:()=>({name:"",icon:""})}},emits:["update:group","confirm","cancel"],setup(e,{emit:t}){const a=e,r=t,o=c(a.visible),u=()=>{r("confirm"),o.value=!1},p=()=>{r("cancel"),o.value=!1};return j(()=>a.visible,()=>{o.value=a.visible}),(v,d)=>(n(),m(A,{title:e.title,visible:o.value,"onUpdate:visible":d[1]||(d[1]=l=>o.value=l),onConfirm:u,onCancel:p},{default:y(()=>[h(G,{class:"my-2",name:"name",modelValue:e.group.name,"onUpdate:modelValue":d[0]||(d[0]=l=>e.group.name=l),placeholder:"请输入分类名"},null,8,["modelValue"])]),_:1},8,["title","visible"]))}},ie=_;export{de as B,ie as G,le as a,re as c,ne as g,ue as r,se as u};
