import{_ as h}from"./GroupModal-CQHL7XIo.js";import{H as _}from"./Header-BZE7___w.js";import{_ as y}from"./ChatPanel-DJsLTmfv.js";import{M as x}from"./Menu-CG1yttFe.js";import{g as C}from"./ai-uUTadsVk.js";import{au as w,av as M,ae as u,aM as b,ay as L,az as V,aA as c,aO as B,aC as I,ao as T}from"./vendor-BNUAhoVR.js";import{g as q}from"./book-CTB1ni6Z.js";import"./Modal-CRZm8Nfu.js";import"./RemixIcon-D7fRXDKe.js";import"./userInfo-CWFSU6LP.js";import"./user-vqedsJWp.js";import"./index-CajyH5eH.js";import"./Loading-DHUeNW1a.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./message-IIE1a5pF.js";const N=[{value:"tongyi",label:"通义千问"},{value:"qianfan",label:"文心一言"},{value:"moonshot",label:"月之暗面"}],O={class:"flex flex-col w-full h-screen"},S={class:"flex-1 flex flex-col w-full lg:pl-80 overflow-y-auto"},W={__name:"Robot",setup(k){const i=w(),d=M(),a=u([]),n=u(!1),r=u("tongyi"),l=u(""),t=u(!0),f=e=>{if(e!==void 0){t.value=e;return}t.value=!t.value},m=(e,o)=>{i.push({path:"/robot",query:{id:e,appId:o}}),l.value=e||"",e?q(e).then(s=>{a.value=JSON.parse(s.content||"[]")}):a.value=[]},p=e=>{n.value=!0,C(l.value,r.value,e).then(o=>{let{id:s,response:g}=o;l.value=s,n.value=!1,a.value=a.value.concat([{role:"user",content:e},{role:"assistant",content:g}])}).catch(o=>{n.value=!1,a.value=a.value.concat([{role:"assistant",content:o.message}])})},v=(e,o)=>{r.value=e,a.value&&a.value.length>0&&(i.push({path:"/robot",query:{id:"new",appId:d.query.appId}}),a.value=[],l.value="")};return b(d.query.id,(e,o)=>{l.value=e},{immediate:!0}),(e,o)=>(L(),V("div",O,[c(_,{onToggleFold:f,fold:t.value},{default:B(()=>[c(h,{class:"w-32 lg:w-48 mx-2",modelValue:r.value,"onUpdate:modelValue":[o[0]||(o[0]=s=>r.value=s),v],palaceHolder:"请选择模型",options:T(N)},null,8,["modelValue","options"])]),_:1},8,["fold"]),c(x,{fixedType:"chat",defaultGroup:!0,fold:t.value,defaultSelected:!1,onToggleFold:f,onMenuChange:m},null,8,["fold"]),I("div",S,[c(y,{editable:!0,messages:a.value,loading:n.value,onChart:p},null,8,["messages","loading"])])]))}};export{W as default};
