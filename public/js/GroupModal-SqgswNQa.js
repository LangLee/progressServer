import{aj as c,aR as j,ao as z,aC as D,aD as l,aE as d,aH as g,aN as x,aS as k,aT as y,b2 as I,aG as O,aV as P,aF as T,aY as R,ay as h,b3 as E,aO as B,aP as G,aZ as F}from"./vendor-Ca624vxD.js";import{M}from"./Modal-DAiAG9nN.js";import{R as W}from"./RemixIcon-Cy7WqHn8.js";import{i as U}from"./utils-BIo_BOvM.js";var S=(e=>(e.markdown="富文本",e.text="文字",e.drawing="图画",e.task="待办",e.code="代码",e.link="链接",e.chat="对话",e))(S||{});const L={class:"flex-1 pr-4"},Y={key:0},Z={key:1,class:"text-slate-300"},q=["onClick"],J={key:1,class:"w-full px-2 py-1"},K={class:"w-full bg-white dark:bg-neutral-800"},Q=["onClick"],X={key:1,class:"w-full py-2 text-center"},A={__name:"Select",props:{options:{type:Array,default:()=>[]},modelValue:String,palaceHolder:{type:String,default:"请选择"}},emits:["update:value"],setup(e,{emit:t}){const o=c(!0),i=c(),n=c(),r=c(""),p=c(U()),m=e,u=t,a=c(""),s=b=>{var f;a.value=b.label,u("update:modelValue",b.value),o.value=!0,(f=i==null?void 0:i.value)==null||f.hide()},H=()=>(o.value=!1,!0),C=()=>(o.value=!0,!0),$=()=>{if(!U())return!0;o.value=!1};return j(()=>m.modelValue,b=>{m.options.map(({value:f,label:w})=>{b===f&&(a.value=w)})},{immediate:!0}),z(()=>{r.value=`${n.value.clientWidth+4}px`}),(b,f)=>{const w=D("tippy");return l(),d("div",{ref_key:"select",ref:n,class:R(["flex p-2 bg-white text-slate-600 dark:text-slate-100 dark:bg-neutral-800 placeholder-slate-300 shadow-sm border rounded-md text-base",{"outline-none ring-2 ring-purple-600 border-transparent":!o.value}]),onClick:$},[g("div",L,[a.value?(l(),d("span",Y,x(a.value),1)):(l(),d("span",Z,x(e.palaceHolder),1))]),p.value?(l(),k(M,{key:1,visible:!o.value,zIndex:100,footer:!1,"onUpdate:visible":C},{default:y(()=>[g("div",K,[e.options&&e.options.length?(l(!0),d(O,{key:0},P(e.options,(v,V)=>(l(),d("div",{key:V,class:"py-2 cursor-pointer hover:bg-blue-400 hover:text-slate-50 text-center dark:text-slate-100 rounded",onClick:N=>s(v)},x(v.label),9,Q))),128)):(l(),d("div",X," 暂无数据 "))])]),_:1},8,["visible"])):(l(),k(w,{key:0,ref_key:"dropdown",ref:i,trigger:"click",placement:"bottom-end",offset:[10,12],animation:"fade",interactive:!0,arrow:!1,triggerTarget:n.value,onShow:H,onHide:C},{content:y(()=>[g("div",{class:"py-1 bg-white dark:bg-neutral-800 shadow-lg drop-shadow-lg rounded",style:I({width:r.value})},[e.options&&e.options.length?(l(!0),d(O,{key:0},P(e.options,(v,V)=>(l(),d("div",{key:V,class:"w-full px-2 py-1 cursor-pointer hover:bg-slate-200 dark:border-b dark:border-slate-50/20 rounded",onClick:N=>s(v)},x(v.label),9,q))),128)):(l(),d("div",J," 暂无数据 "))],4)]),default:y(()=>[T(W,{class:"float-right hover:text-blue-500",name:o.value?"arrow-down-s-fill":"arrow-up-s-fill"},null,8,["name"])]),_:1},8,["triggerTarget"]))],2)}}},ne=()=>h.get("/groups/getPortalAndBooks").then(e=>e&&e.data&&e.data.success?e.data.data:Promise.reject(e&&e.data&&e.data.message)),se=e=>h.get("/groups/getAppGroupAndBooks",{params:{defaultGroup:e}}).then(t=>t&&t.data&&t.data.success?t.data.data:Promise.reject(t&&t.data&&t.data.message)),re=e=>h.post("/groups/createGroup",e).then(t=>t&&t.data&&t.data.success?t.data.data:Promise.reject(t&&t.data&&t.data.message)),ue=e=>h.post("/groups/updateGroup",e).then(t=>t&&t.data&&t.data.success?t.data.data:Promise.reject(t&&t.data&&t.data.message)),de=e=>h.post("/groups/removeGroup",{id:e}).then(t=>t&&t.data&&t.data.success?t.data.data:Promise.reject(t&&t.data&&t.data.message)),_={__name:"BookModal",props:{visible:{type:Boolean,default:!1},book:{type:Object,default:()=>({id:"",title:"",category:"",url:"",type:""})},categories:{type:Array,default:()=>[]},typeOptions:{type:Object,default:()=>Object.keys(S).filter(e=>!["chat","link"].includes(e)).map(e=>({label:S[e],value:e}))},fixedType:{type:String,default:""}},emits:["update:book","confirm","cancel"],setup(e,{emit:t}){const o=e,i=E(()=>o.categories.map(u=>({label:u.name,value:u.id}))),n=t,r=c(o.visible),p=()=>{n("confirm"),r.value=!1},m=()=>{n("cancel"),r.value=!1};return j(()=>o.visible,()=>{r.value=o.visible}),(u,a)=>(l(),k(M,{visible:r.value,"onUpdate:visible":a[4]||(a[4]=s=>r.value=s),onConfirm:p,onCancel:m},{default:y(()=>[B(g("input",{class:"p-2 my-2 bg-white dark:bg-neutral-800 text-slate-600 dark:text-slate-100 placeholder-slate-300 shadow-sm border rounded-md text-base focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent",type:"text","onUpdate:modelValue":a[0]||(a[0]=s=>e.book.title=s),placeholder:"请输入书名"},null,512),[[G,e.book.title]]),T(A,{class:"my-2",modelValue:e.book.category,"onUpdate:modelValue":a[1]||(a[1]=s=>e.book.category=s),options:i.value},null,8,["modelValue","options"]),e.fixedType==="link"?B((l(),d("input",{key:0,class:"p-2 my-2 bg-white dark:bg-neutral-800 text-slate-600 dark:text-slate-100 placeholder-slate-300 shadow-sm border rounded-md text-base focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent",type:"text","onUpdate:modelValue":a[2]||(a[2]=s=>e.book.url=s),placeholder:"请输入链接(http://www.xxxx.com)"},null,512)),[[G,e.book.url]]):e.fixedType?F("",!0):(l(),k(A,{key:1,class:"my-2",modelValue:e.book.type,"onUpdate:modelValue":a[3]||(a[3]=s=>e.book.type=s),options:e.typeOptions},null,8,["modelValue","options"]))]),_:1},8,["visible"]))}},ie=_,ee={__name:"GroupModal",props:{visible:{type:Boolean,default:!1},title:{type:String,default:"新增分类"},group:{type:Object,default:()=>({name:"",icon:""})}},emits:["update:group","confirm","cancel"],setup(e,{emit:t}){const o=e,i=t,n=c(o.visible),r=()=>{i("confirm"),n.value=!1},p=()=>{i("cancel"),n.value=!1};return j(()=>o.visible,()=>{n.value=o.visible}),(m,u)=>(l(),k(M,{title:e.title,visible:n.value,"onUpdate:visible":u[1]||(u[1]=a=>n.value=a),onConfirm:r,onCancel:p},{default:y(()=>[B(g("input",{class:"p-2 mb-2 bg-white text-slate-600 placeholder-slate-300 shadow-sm border rounded-md text-base focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent",type:"text","onUpdate:modelValue":u[0]||(u[0]=a=>e.group.name=a),placeholder:"请输入分类名"},null,512),[[G,e.group.name]])]),_:1},8,["title","visible"]))}},ce=ee;export{ie as B,ce as G,ne as a,re as c,se as g,de as r,ue as u};
