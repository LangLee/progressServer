import{ay as u,bf as m}from"./vendor-Ca624vxD.js";import{b as p}from"./index-D5Zmbx3T.js";const A=a=>u.post("/ai/getYouDaoAiTranslate",a).then(t=>t.data&&t.data.success?t.data.data&&t.data.data:Promise.reject(t.data&&t.data.message)),S=({appId:a,id:t,mode:i,question:l,autoSave:c},d,r)=>{let o=new AbortController;const g=localStorage.getItem("me_token")||"";return m(`${p}/ai/getAiChatStream`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:g,appId:a},openWhenHidden:!0,body:JSON.stringify({id:t,mode:i,question:l,autoSave:c}),signal:o==null?void 0:o.signal,onmessage:e=>{const s=e.data||"";if(s==="[DONE]"){r(),o.abort();return}const n=JSON.parse(s).choices[0].delta.content;if(n==null){console.log("stop..."),r();return}d(n),console.log(n)},onclose(){console.log("close")},onerror(e){throw o.abort(),e}})};export{A as a,S as g};
