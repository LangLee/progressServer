import{C as V}from"./Card-qUt5X4wy.js";import{aj as c,aR as j,aD as m,aS as B,aT as M,aO as b,aP as x,aH as l,aU as N,aE as g,aN as A,ay as f,ao as E,aF as p,aG as k,aV as U}from"./vendor-Ca624vxD.js";import{M as O}from"./Modal-DAiAG9nN.js";import"./RemixIcon-Cy7WqHn8.js";import{H as P}from"./Header-PYXapPSr.js";import{m as w}from"./message-BXUz8B8N.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./userInfo-CpJIz3bh.js";import"./user-Ugs0z67X.js";import"./index-D5Zmbx3T.js";const H={class:"px-2"},R=l("label",{class:"mr-2",for:"inner"},"是否内置",-1),S={__name:"AppModal",props:{title:{type:String,default:"新增应用"},visible:{type:Boolean,default:!1},app:{type:Object,default:()=>({title:"",url:"",icon:"",inner:!1})}},emits:["update:app","confirm","cancel"],setup(e,{emit:t}){const r=e,d=t,s=c(r.visible),u=()=>{d("confirm"),s.value=!1},v=()=>{d("cancel"),s.value=!1};return j(()=>r.visible,()=>{s.value=r.visible}),(y,o)=>(m(),B(O,{title:e.title,visible:s.value,"onUpdate:visible":o[4]||(o[4]=n=>s.value=n),onConfirm:u,onCancel:v},{default:M(()=>[b(l("input",{class:"p-2 mb-4 bg-white text-slate-600 placeholder-slate-300 shadow-sm border rounded-md text-base focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent",type:"text","onUpdate:modelValue":o[0]||(o[0]=n=>e.app.title=n),placeholder:"请输入应用标题"},null,512),[[x,e.app.title]]),b(l("input",{class:"p-2 mb-4 bg-white text-slate-600 placeholder-slate-300 shadow-sm border rounded-md text-base focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent",type:"text","onUpdate:modelValue":o[1]||(o[1]=n=>e.app.url=n),placeholder:"请输入应用地址"},null,512),[[x,e.app.url]]),b(l("input",{class:"p-2 mb-4 bg-white text-slate-600 placeholder-slate-300 shadow-sm border rounded-md text-base focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent",type:"text","onUpdate:modelValue":o[2]||(o[2]=n=>e.app.icon=n),placeholder:"应用图标"},null,512),[[x,e.app.icon]]),l("div",H,[R,l("span",null,[b(l("input",{id:"inner",type:"checkbox","onUpdate:modelValue":o[3]||(o[3]=n=>e.app.inner=n)},null,512),[[N,e.app.inner]])])])]),_:1},8,["title","visible"]))}},D={class:"flex flex-col items-center shadow-lg rounded-lg bg-white dark:bg-transparent dark:border-b dark:border-slate-50/20"},F=["src","alt"],L={class:"lg:text-lg text-slate-300"},T={class:"p-4 lg:p-8 lg:font-medium lg:text-lg text-slate-500 dark:text-slate-200"},G={__name:"Note",props:{modelValue:{type:Object,default:()=>({_id:"",image:"",word:"",from:"",photoBy:""})}},setup(e){return(t,r)=>(m(),g("div",D,[l("img",{class:"w-full lg:w-[50rem]",src:e.modelValue.image,alt:e.modelValue.photoBy},null,8,F),l("span",L,A(e.modelValue.photoBy),1),l("p",T,A(e.modelValue.word),1)]))}},q=()=>f.get("/app/getApps").then(e=>e&&e.data&&e.data.success?e.data.data:Promise.reject(e&&e.data&&e.data.message)),z=e=>f.post("/app/createApp",e).then(t=>t&&t.data&&t.data.success?t.data.data:Promise.reject(t&&t.data&&t.data.message)),I=e=>f.post("/app/updateApp",e).then(t=>t&&t.data&&t.data.success?(t.data.message&&w.success(t.data.message),t.data.data):Promise.reject(t&&t.data&&t.data.message)),J=e=>f.post("/app/removeApp",{id:e}).then(t=>t&&t.data&&t.data.success?t.data.data:Promise.reject(t&&t.data&&t.data.message)),K=()=>f.get("/note/getOneNote").then(e=>{if(e.data.success)return e.data.data;e.data.message&&w.error(e.data.message)}),Q={class:"h-screen w-full flex flex-col overflow-y-auto"},W={class:"flex p-2 lg:p-4 flex-wrap justify-start"},X={class:"flex flex-col items-center p-2 lg:p-4 basis-1/4 md:basis-1/6 lg:basis-1/12"},ue={__name:"Home",setup(e){const t=c([]),r=c(!1),d=c(!1),s=c(void 0),u=c(!1),v=c(),y=()=>{u.value=!0,s.value={title:"新增",icon:"book-2-fill",inner:!0},d.value=!0},o=a=>{u.value=!1,s.value=a,d.value=!0},n=async()=>{u.value?await z(s.value).then(a=>{t.value.push(a),u.value=!1}):await I(s.value).catch(a=>{w.error(a)}),d.value=!1},C=()=>{u.value=!1,s.value=void 0,d.value=!1},$=a=>{J(a).then(h=>{t.value=t.value.filter(i=>i._id!==a)})};return E(()=>{q().then(a=>{let{editable:h,apps:i}=a||{};t.value=i||[],r.value=h}),K().then(a=>{v.value=a})}),(a,h)=>(m(),g(k,null,[l("div",Q,[p(P,{hiddenFold:!0}),p(G,{class:"flex-none m-4 lg:m-8",modelValue:v.value},null,8,["modelValue"]),l("div",W,[(m(!0),g(k,null,U(t.value,(i,Y)=>(m(),g("div",{key:i._id,class:"flex flex-col items-center p-2 lg:p-4 basis-1/4 md:basis-1/6 lg:basis-1/12"},[p(V,{editable:i.system&&r.value||!i.system,modelValue:i,theme:"blue",onEdit:_=>o(i),onRemove:_=>$(i._id)},null,8,["editable","modelValue","onEdit","onRemove"])]))),128)),l("div",X,[p(V,{theme:"blue",modelValue:{title:"新增应用",icon:"add-line"},onCardClick:y})])])]),p(S,{title:`${u.value?"新增应用":"编辑应用"}`,visible:d.value,app:s.value,onConfirm:n,onCancel:C},null,8,["title","visible","app"])],64))}};export{ue as default};
