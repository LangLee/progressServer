import{_ as S}from"./no-data-ou6-36FL.js";import"./remixicon-l0sNRNKZ.js";import{_ as g}from"./Header-jlxeZXVD.js";import{bd as v,bf as T,az as o,aA as s,aD as t,a_ as m,aH as i,aB as x,aF as b,aG as h,ak as I,aj as j,aW as C,aO as H,b2 as O,au as k,aI as P}from"./vendor-DqHIQWU1.js";import{_ as w}from"./index-bEem1MK9.js";import{c as A}from"./utils-DVDKZiQc.js";import{m as N}from"./message-DsTL7g5X.js";import{Q as E}from"./Question-DbNPOHdm.js";import{u as L}from"./userInfo-CSbayTML.js";import{u as M}from"./oneNote-D4VVWFj3.js";/* empty css                                                                */const z={class:"flex flex-row mb-4"},F={class:"w-10 py-2 pr-2"},Q=["innerHTML"],_={key:0,class:"text-slate-400 dark:text-neutral-500 text-sm mt-2 cursor-pointer"},q=t("span",null,"笔记",-1),D=t("span",null,"复制",-1),G={class:"w-10 py-2 pl-2"},B={__name:"ChatCard",props:{avatar:{type:String,default:""},content:{type:String,default:""},position:{type:String,default:"left"},toolbar:{type:Boolean,default:!1}},setup(e){const r=e,d=v(()=>T.parse(r.content)),n=v(()=>r.position==="left"),u=()=>{console.log("onAdd")},f=()=>{A(r.content,()=>{N.success("复制成功！")})};return(p,y)=>(o(),s("div",z,[t("div",F,[n.value?(o(),m(g,{key:0,icon:"robot-2-fill",file:e.avatar},null,8,["file"])):i("",!0)]),t("div",{class:x(["flex flex-1 overflow-hidden",n.value?"justify-start":"justify-end"])},[t("div",{class:x(["max-w-full border border-slate-300/20 inline-block px-4 py-2 rounded-lg",n.value?"bg-white dark:bg-neutral-800":"bg-blue-100 dark:bg-neutral-700"])},[t("span",{class:"prose prose-sm dark:prose-invert tiptap",innerHTML:d.value},null,8,Q),e.toolbar?(o(),s("div",_,[t("span",{class:"mr-2 hover:text-slate-700 dark:hover:text-neutral-300",onClick:b(u,["stop"])},[h(w,{name:"add-box-line"}),q]),t("span",{class:"mr-2 hover:text-slate-700 dark:hover:text-neutral-300",onClick:b(f,["stop"])},[h(w,{name:"file-copy-2-line"}),D])])):i("",!0)],2)],2),t("div",G,[n.value?i("",!0):(o(),m(g,{key:0,file:e.avatar},null,8,["file"]))])]))}},U={class:"flex flex-col w-full h-full max-w-screen-md mx-auto"},W={key:0,id:"chatContent",class:"w-full flex-1 p-2 lg:p-4 text-slate-900 font-normal overflow-y-auto"},J={class:"flex flex-col content-space-between"},K=t("div",{class:"w-full h-full flex justify-center items-center"},[t("img",{class:"w-80",src:S,alt:"暂无聊天"})],-1),R={key:2,class:"relative w-full text-lg px-2 lg:px-4 mb-2 lg:mb-4"},re={__name:"ChatPanel",props:{editable:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},messages:{type:Array,default:()=>[]},placeholder:{type:String,default:"有什么问题尽管问"},owner:{type:String,default:"user"},chatter:{type:Object,default:null},roleProperty:{type:String,default:"role"},response:{type:String,default:""},cardOperation:{type:Boolean,default:!1},showCharter:{type:Boolean,default:!1}},emits:["chart","clearChatter"],setup(e,{emit:r}){const d=L(),{proxy:n}=I(),u=e,f=r,p=j("");M();const y=a=>{f("chart",a)};return C(()=>u.messages,(a,l)=>{a&&a.length>0&&a.length!==l.length&&(p.value="",n.$nextTick(()=>{document.getElementById("chatContent"),chatContent&&chatContent.scrollTo({top:chatContent.scrollHeight,behavior:"smooth"})}))}),C(()=>u.response,(a,l)=>{a&&a!==l&&n.$nextTick(()=>{document.getElementById("chatContent"),chatContent&&chatContent.scrollTo({top:chatContent.scrollHeight,behavior:"smooth"})})}),(a,l)=>(o(),s("div",U,[e.messages&&e.messages.length>0?(o(),s("div",W,[t("div",J,[(o(!0),s(H,null,O(e.messages,(c,$)=>(o(),m(B,{key:$,content:c.content,position:c[e.roleProperty]===e.owner?"right":"left",avatar:c[e.roleProperty]===e.owner?k(d)&&k(d).avatar:e.chatter&&e.chatter.avatar||"",toolbar:e.cardOperation&&c[e.roleProperty]!==e.owner},null,8,["content","position","avatar","toolbar"]))),128)),e.response?(o(),m(B,{key:0,content:e.response},null,8,["content"])):i("",!0)])])):P(a.$slots,"empty",{key:1},()=>[K]),e.editable?(o(),s("div",R,[h(E,{onSend:y,onClearChatter:l[0]||(l[0]=c=>f("clearChatter")),placeholder:e.placeholder,chatter:e.showCharter?e.chatter:null},null,8,["placeholder","chatter"])])):i("",!0)]))}};export{re as _};
