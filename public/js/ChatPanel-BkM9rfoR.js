import{b3 as v,b6 as _,aD as o,aE as r,aH as t,aS as c,aZ as i,aX as h,aF as y,aY as B,aj as T,aR as b,aG as k,aV as $,aO as S,aP as P,aW as H,aw as I}from"./vendor-Ca624vxD.js";import{R as x}from"./RemixIcon-Cy7WqHn8.js";import{L}from"./Loading-BieOgBO-.js";import"./Modal-DAiAG9nN.js";import{_ as C}from"./Header-PYXapPSr.js";import{c as E}from"./utils-BIo_BOvM.js";import{m as M}from"./message-BXUz8B8N.js";const j={class:"flex flex-row mb-4"},A={class:"w-10 py-2 pr-2"},K={class:"border border-slate-300/20 inline-block px-4 py-2 rounded-xl shadow-md dark:bg-neutral-800"},N=["innerHTML"],R={key:0,class:"text-slate-400 dark:text-neutral-500 text-sm mt-2 cursor-pointer"},V=t("span",null,"笔记",-1),q=t("span",null,"复制",-1),D={class:"w-10 py-2 pl-2"},g={__name:"ChatCard",props:{content:{type:String,default:""},roleProperty:String,position:{type:String,default:"left"},toolbar:{type:Boolean,default:!1}},setup(e){const d=e,p=v(()=>_.parse(d.content)),s=v(()=>d.position==="left"),m=()=>{console.log("onAdd")},a=()=>{E(d.content,()=>{M.success("复制成功！")})};return(f,n)=>(o(),r("div",j,[t("div",A,[s.value?(o(),c(C,{key:0,icon:"robot-2-fill"})):i("",!0)]),t("div",{class:B(["flex flex-1",s.value?"justify-start":"justify-end"])},[t("div",K,[t("span",{class:"prose dark:prose-invert tiptap",innerHTML:p.value},null,8,N),e.toolbar?(o(),r("div",R,[t("span",{class:"mr-2 hover:text-slate-700 dark:hover:text-neutral-300",onClick:h(m,["stop"])},[y(x,{name:"add-box-line"}),V]),t("span",{class:"mr-2 hover:text-slate-700 dark:hover:text-neutral-300",onClick:h(a,["stop"])},[y(x,{name:"file-copy-2-line"}),q])])):i("",!0)])],2),t("div",D,[s.value?i("",!0):(o(),c(C,{key:0}))])]))}},F={id:"chatContent",class:"w-full flex-1 text-base p-2 lg:p-4 text-slate-900 font-normal overflow-y-auto"},z={key:0,class:"flex flex-col content-space-between"},G={key:0,class:"relative h-24 lg:h-28 w-full text-lg px-2 lg:px-4 mb-4 lg:mb-8"},O=["onKeyup"],U=t("span",{class:"mr-1"},"发送",-1),te={__name:"ChatPanel",props:{editable:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},messages:{type:Array,default:()=>[]},placeholder:{type:String,default:"开始向我提问吧..."},owner:{type:String,default:"user"},roleProperty:{type:String,default:"role"},response:{type:String,default:""}},emits:["chart"],setup(e,{emit:d}){const{proxy:p}=I(),s=e,m=d,a=T(""),f=()=>{a.value=a.value.replace(/[\r\n]/g,""),m("chart",a.value),a.value=""};return b(()=>s.messages,(n,l)=>{n&&n.length!==l.length&&(a.value="",p.$nextTick(()=>{document.getElementById("chatContent"),chatContent&&chatContent.scrollTo({top:chatContent.scrollHeight,behavior:"smooth"})}))}),b(()=>s.response,(n,l)=>{n&&n!==l&&p.$nextTick(()=>{document.getElementById("chatContent"),chatContent&&chatContent.scrollTo({top:chatContent.scrollHeight,behavior:"smooth"})})}),(n,l)=>(o(),r(k,null,[t("div",F,[e.messages&&e.messages.length>0?(o(),r("div",z,[(o(!0),r(k,null,$(e.messages,(u,w)=>(o(),c(g,{key:w,content:u.content,position:u[e.roleProperty]===e.owner?"right":"left",toolbar:u[e.roleProperty]!==e.owner},null,8,["content","position","toolbar"]))),128)),e.response?(o(),c(g,{key:0,content:e.response},null,8,["content"])):i("",!0)])):(o(),c(g,{key:1,content:e.placeholder},null,8,["content"]))]),e.editable?(o(),r("div",G,[S(t("textarea",{ref:"questionInput",rows:3,class:"w-full border rounded-lg shadow-sm py-2 lg:py-4 pl-4 pr-20 text-slate-600 dark:text-slate-50 placeholder-slate-300 font-normal text-lg focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent dark:bg-neutral-800 dark:focus:ring-slate-300 dark:border-slate-600","onUpdate:modelValue":l[0]||(l[0]=u=>a.value=u),type:"text",placeholder:"开始对话",onKeyup:H(h(f,["stop"]),["enter"])},null,40,O),[[P,a.value]]),t("button",{class:"absolute top-2 lg:top-4 right-4 lg:right-8 w-16 text-blue-300 hover:text-blue-600 dark:text-slate-300 dark:hover:text-slate-50",onClick:h(f,["stop"])},[U,y(x,{name:"send-plane-fill"})])])):i("",!0),e.loading?(o(),c(L,{key:1})):i("",!0)],64))}};export{te as _};
