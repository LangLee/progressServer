import{C as y}from"./Card-DdO88aH6.js";import{aD as p,aE as m,aH as s,aW as A,aj as c,aR as U,aY as B,aS as E,aO as x,aP as h,aF as d,aX as M,ao as R,aG as w,aT as S,at as k}from"./vendor-7SOp03Eo.js";import{M as j}from"./Modal-DgpgRzLZ.js";import{H as q}from"./Header-RLgrfCVI.js";import{g as F,c as H,u as N,r as D}from"./app-CrZG00tE.js";import{m as O}from"./message-DneuB5hD.js";import{u as T}from"./userInfo-GWa4mCN8.js";import"./RemixIcon-C3kAUqBT.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-DjlSiqBu.js";const z={class:"relative inline-flex items-center h-6 border border-slate-400 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2"},G=["checked"],I=s("span",{class:"sr-only"},"Use setting",-1),g={__name:"Switch",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:u}){return(n,o)=>(p(),m("label",z,[s("input",{type:"checkbox",checked:e.modelValue,onChange:o[0]||(o[0]=a=>n.$emit("update:modelValue",a.target.checked)),class:"absolute opacity-0 w-0 h-0"},null,40,G),s("span",{"aria-hidden":"true",class:A(["inline-block w-5 h-5 rounded-full shadow transform ring-0 transition duration-200 ease-in-out",{"bg-blue-400 translate-x-5":e.modelValue,"bg-slate-400 translate-x-0":!e.modelValue}])},null,2),I]))}},L={class:"flex flex-row items-center px-2 mb-4"},P=s("span",{class:"mr-2"},"是否内置",-1),W={class:"flex flex-row items-center px-2"},X=s("span",{class:"mr-2"},"快捷应用",-1),Y={key:0,class:"flex flex-row items-center px-2 mt-4"},J=s("span",{class:"mr-2"},"系统应用",-1),K={__name:"AppModal",props:{title:{type:String,default:"新增应用"},visible:{type:Boolean,default:!1},app:{type:Object,default:()=>({title:"",url:"",icon:"",inner:!1,quick:!1,system:!1})},system:{type:Boolean,default:!1}},emits:["update:app","confirm","cancel"],setup(e,{emit:u}){const n=e,o=u,a=c(n.visible),f=()=>{o("confirm"),a.value=!1},v=()=>{o("cancel"),a.value=!1};return U(()=>n.visible,()=>{a.value=n.visible}),(V,t)=>(p(),B(j,{title:e.title,visible:a.value,"onUpdate:visible":t[6]||(t[6]=l=>a.value=l),onConfirm:f,onCancel:v},{default:E(()=>[x(s("input",{class:"p-2 mb-4 bg-white text-slate-600 placeholder-slate-300 shadow-sm border rounded-md text-base focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent",type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>e.app.title=l),placeholder:"请输入应用标题"},null,512),[[h,e.app.title]]),x(s("input",{class:"p-2 mb-4 bg-white text-slate-600 placeholder-slate-300 shadow-sm border rounded-md text-base focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent",type:"text","onUpdate:modelValue":t[1]||(t[1]=l=>e.app.url=l),placeholder:"请输入应用地址"},null,512),[[h,e.app.url]]),x(s("input",{class:"p-2 mb-4 bg-white text-slate-600 placeholder-slate-300 shadow-sm border rounded-md text-base focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent",type:"text","onUpdate:modelValue":t[2]||(t[2]=l=>e.app.icon=l),placeholder:"应用图标"},null,512),[[h,e.app.icon]]),s("div",L,[P,d(g,{modelValue:e.app.inner,"onUpdate:modelValue":t[3]||(t[3]=l=>e.app.inner=l)},null,8,["modelValue"])]),s("div",W,[X,d(g,{modelValue:e.app.quick,"onUpdate:modelValue":t[4]||(t[4]=l=>e.app.quick=l)},null,8,["modelValue"])]),e.system?(p(),m("div",Y,[J,d(g,{modelValue:e.app.system,"onUpdate:modelValue":t[5]||(t[5]=l=>e.app.system=l)},null,8,["modelValue"])])):M("",!0)]),_:1},8,["title","visible"]))}},Q={class:"h-screen w-full flex flex-col overflow-y-auto"},Z={class:"flex p-2 lg:p-4 flex-wrap justify-start"},_={class:"flex flex-col items-center p-2 lg:p-4 basis-1/4 md:basis-1/6 lg:basis-1/12"},pe={__name:"Apps",setup(e){const u=c([]),n=c(!1),o=c(void 0),a=c(!1),f=T(),v=()=>{a.value=!0,o.value={title:"新增",icon:"book-2-fill",inner:!0},n.value=!0},V=i=>{a.value=!1,o.value=i,n.value=!0},t=async()=>{a.value?await H(o.value).then(i=>{u.value.push(i),a.value=!1}):await N(o.value).catch(i=>{O.error(i)}),n.value=!1},l=()=>{a.value=!1,o.value=void 0,n.value=!1},C=i=>{D(i).then(b=>{u.value=u.value.filter(r=>r._id!==i)})};return R(()=>{F("user").then(i=>{u.value=i||[]})}),(i,b)=>(p(),m(w,null,[s("div",Q,[d(q,{hiddenFold:!0}),s("div",Z,[(p(!0),m(w,null,S(u.value,(r,ee)=>(p(),m("div",{key:r._id,class:"flex flex-col items-center p-2 lg:p-4 basis-1/4 md:basis-1/6 lg:basis-1/12"},[d(y,{editable:!0,modelValue:r,theme:"blue",onEdit:$=>V(r),onRemove:$=>C(r._id)},null,8,["modelValue","onEdit","onRemove"])]))),128)),s("div",_,[d(y,{theme:"blue",modelValue:{title:"新增应用",icon:"add-line"},onCardClick:v})])])]),d(K,{title:`${a.value?"新增应用":"编辑应用"}`,visible:n.value,app:o.value,"onUpdate:app":b[0]||(b[0]=r=>o.value=r),onConfirm:t,onCancel:l,system:k(f)&&k(f).administrator},null,8,["title","visible","app","system"])],64))}};export{pe as default};
