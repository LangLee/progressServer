const __vite__fileDeps=["./Markdown-BC5I4W5i.js","./tiptap-DvRu_p-f.js","./vendor-BLq22pPX.js","../css/vendor-St55MTdn.css","./RemixIcon-BDA1nEXk.js","./ai-gi_gpRwF.js","./message-AZuur2LZ.js","./_plugin-vue_export-helper-DlAUqK2U.js","../css/message-BEItxtsU.css","./utils-_yvyshlj.js","../css/Markdown-DCFTSIbh.css","./Text-DD7Z3T24.js","./Code-DysBLEBm.js","../css/Code-BLTi7TbQ.css","./Task-Cbsq26nC.js","../css/Task-CoyDmG1V.css","./Drawing-DtH-BXQI.js","../css/Drawing-Bdgq6z4a.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{_ as n}from"./index-DpKJEyGL.js";import{ad as x,av as E,aj as A,ae as m,aL as C,ay as p,az as _,aM as I,aV as R,aA as L,aU as V,aF as s}from"./vendor-BLq22pPX.js";import{u as y,g as P}from"./book-B1UjrR01.js";import{m as f}from"./message-AZuur2LZ.js";import{R as B}from"./RemixIcon-BDA1nEXk.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"w-full h-full flex"},F=x({__name:"Book",setup(O){const k=E(),r=A(),l=m(""),u=m(Array()),c=m(!0),i=m(!1);let v="";const d=m(""),b=()=>new Promise(e=>{if(l.value===v)return e(!0);let o=[];u.value.length>0&&(o=u.value.map(a=>({id:a.id,itemIndex:a.itemIndex,level:a.level,originalLevel:a.originalLevel,pos:a.pos,textContent:a.textContent})));let t={id:d.value,content:l.value,anchors:o};y(t).then(a=>{a&&(v=l.value,f.success("保存成功"),e(!0))}).catch(a=>{f.error(a),e(!1)})}),g=e=>{switch(e){case"markdown":{r.value=s(()=>n(()=>import("./Markdown-BC5I4W5i.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url));break}case"chat":case"text":{r.value=s(()=>n(()=>import("./Text-DD7Z3T24.js"),__vite__mapDeps([11,1,2,3,9]),import.meta.url));break}case"code":{r.value=s(()=>n(()=>import("./Code-DysBLEBm.js"),__vite__mapDeps([12,2,3,9,13]),import.meta.url));break}case"task":{r.value=s(()=>n(()=>import("./Task-Cbsq26nC.js"),__vite__mapDeps([14,1,2,3,9,15]),import.meta.url));break}case"drawing":{r.value=s(()=>n(()=>import("./Drawing-DtH-BXQI.js"),__vite__mapDeps([16,1,2,3,7,9,17]),import.meta.url));break}default:{r.value=s(()=>n(()=>import("./Markdown-BC5I4W5i.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url));break}}},h=()=>{i.value?b().then(()=>{i.value=!1}):i.value=c.value};return C(()=>k.params.id,(e,o)=>{e&&e!==o&&(typeof e=="string"&&(d.value=e||""),P(d.value).then(t=>{l.value=t.content||"",u.value=t.anchors||[],v=t.content||"",c.value=t.editable||!1,g(t.type)}))},{immediate:!0}),(e,o)=>(p(),_("div",D,[(p(),I(R(r.value),{editable:i.value,modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=t=>l.value=t),anchors:u.value,"onUpdate:anchors":o[1]||(o[1]=t=>u.value=t)},null,40,["editable","modelValue","anchors"])),c.value?(p(),_("div",{key:0,class:"fixed top-28 right-4 w-8 h-8 text-center rounded-full border bg-blue-700/10 hover:bg-blue-500 z-50 cursor-pointer",onClick:h},[L(B,{class:"text-slate-50 text-lg",name:i.value?"save-line":"file-edit-line"},null,8,["name"])])):V("",!0)]))}});export{F as default};
