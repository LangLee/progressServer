import{R as g}from"./RemixIcon-CgHXNHMg.js";import"./Modal-B5x_NgZY.js";import{_ as x}from"./Header-C2ZRdA8X.js";import{b4 as v,b8 as S,aD as o,aE as s,aH as t,aQ as f,aR as r,aY as b,aX as k,aF as m,aj as T,aT as C,aG as I,aV as _,at as w,aZ as j,aw as H}from"./vendor-CWXOCgin.js";import{c as P}from"./utils-BIo_BOvM.js";import{m as E}from"./message-B11-HW_C.js";import{_ as F}from"./Question-B_5_mfwX.js";import{u as A}from"./userInfo-BH_HArD6.js";import{F as L}from"./FishGlass-BerDv30e.js";const M={class:"flex flex-row mb-4"},N={class:"w-10 py-2 pr-2"},O=["innerHTML"],R={key:0,class:"text-slate-400 dark:text-neutral-500 text-sm mt-2 cursor-pointer"},G=t("span",null,"笔记",-1),q=t("span",null,"复制",-1),z={class:"w-10 py-2 pl-2"},$={__name:"ChatCard",props:{avatar:{type:String,default:""},content:{type:String,default:""},position:{type:String,default:"left"},toolbar:{type:Boolean,default:!1}},setup(e){const l=e,c=v(()=>S.parse(l.content)),n=v(()=>l.position==="left"),i=()=>{console.log("onAdd")},h=()=>{P(l.content,()=>{E.success("复制成功！")})};return(p,y)=>(o(),s("div",M,[t("div",N,[n.value?(o(),f(x,{key:0,icon:"robot-2-fill",file:e.avatar},null,8,["file"])):r("",!0)]),t("div",{class:b(["flex flex-1 overflow-hidden",n.value?"justify-start":"justify-end"])},[t("div",{class:b(["max-w-full border border-slate-300/20 inline-block px-4 py-2 rounded-lg",n.value?"bg-white dark:bg-neutral-800":"bg-blue-100 dark:bg-neutral-700"])},[t("span",{class:"prose prose-sm dark:prose-invert tiptap",innerHTML:c.value},null,8,O),e.toolbar?(o(),s("div",R,[t("span",{class:"mr-2 hover:text-slate-700 dark:hover:text-neutral-300",onClick:k(i,["stop"])},[m(g,{name:"add-box-line"}),G]),t("span",{class:"mr-2 hover:text-slate-700 dark:hover:text-neutral-300",onClick:k(h,["stop"])},[m(g,{name:"file-copy-2-line"}),q])])):r("",!0)],2)],2),t("div",z,[n.value?r("",!0):(o(),f(x,{key:0,file:e.avatar},null,8,["file"]))])]))}},D={class:"flex flex-col w-full h-full max-w-screen-md mx-auto"},Q={key:0,id:"chatContent",class:"w-full flex-1 p-2 lg:p-4 text-slate-900 font-normal overflow-y-auto"},U={class:"flex flex-col content-space-between"},V={class:"flex flex-col w-full justify-center items-center p-10 overflow-y-auto"},X=t("span",{class:"text-gray-500 dark:text-gray-300 italic"},"子非鱼，安知鱼之乐？",-1),Y={key:2,class:"relative w-full text-lg px-2 lg:px-4 mb-2 lg:mb-4"},se={__name:"ChatPanel",props:{editable:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},messages:{type:Array,default:()=>[]},placeholder:{type:String,default:"有什么问题尽管问"},owner:{type:String,default:"user"},chatter:{type:Object,default:null},roleProperty:{type:String,default:"role"},response:{type:String,default:""},cardOperation:{type:Boolean,default:!1}},emits:["chart"],setup(e,{emit:l}){const c=A(),{proxy:n}=H(),i=e,h=l,p=T(""),y=a=>{h("chart",a)};return C(()=>i.messages,(a,d)=>{a&&a.length>0&&a.length!==d.length&&(p.value="",n.$nextTick(()=>{document.getElementById("chatContent"),chatContent&&chatContent.scrollTo({top:chatContent.scrollHeight,behavior:"smooth"})}))}),C(()=>i.response,(a,d)=>{a&&a!==d&&n.$nextTick(()=>{document.getElementById("chatContent"),chatContent&&chatContent.scrollTo({top:chatContent.scrollHeight,behavior:"smooth"})})}),(a,d)=>(o(),s("div",D,[e.messages&&e.messages.length>0?(o(),s("div",Q,[t("div",U,[(o(!0),s(I,null,_(e.messages,(u,B)=>(o(),f($,{key:B,content:u.content,position:u[e.roleProperty]===e.owner?"right":"left",avatar:u[e.roleProperty]===e.owner?w(c)&&w(c).avatar:e.chatter&&e.chatter.avatar||"",toolbar:e.cardOperation&&u[e.roleProperty]!==e.owner},null,8,["content","position","avatar","toolbar"]))),128)),e.response?(o(),f($,{key:0,content:e.response},null,8,["content"])):r("",!0)])])):j(a.$slots,"empty",{key:1},()=>[t("div",V,[m(L),X])]),e.editable?(o(),s("div",Y,[m(F,{onSend:y,placeholder:e.placeholder},null,8,["placeholder"])])):r("",!0)]))}};export{se as _};
