import{B as U,E as W,S as z,V as j,n as F,N as K,a as Y,m as G,b as Z,u as X,D as J,c as Q,H as ee,T as te,d as ne,U as oe,L as ae,e as ie,f as le,C as re,p as se,P as de,I as ce,i as ue,g as ge,h as me,j as he,k as fe,l as pe}from"./tiptap-DZtZPlcx.js";import{az as ye,aA as be,aR as L,aD as m,aE as b,aG as A,aV as S,b2 as ve,aH as o,aS as H,aZ as T,b9 as ke,aN as w,aY as v,aX as q,T as xe,aj as x,aC as _,aT as k,b8 as B,aF as s,aO as P,aP as E,at as R,ah as we,b6 as Ce,as as Re,ai as He,ba as $e,bb as Te,bc as Ae,bd as Be,be as Le,al as Se}from"./vendor-Ca624vxD.js";import{R as c}from"./RemixIcon-Cy7WqHn8.js";import{a as _e,g as Ie}from"./ai-B24q-XeF.js";import{m as Me}from"./message-BXUz8B8N.js";import{_ as Ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{d as De}from"./utils-BIo_BOvM.js";import"./index-D5Zmbx3T.js";const Oe={class:"flex flex-col justify-between overflow-y-auto sticky max-h-(screen-18) pb-6 top-18"},qe={key:0,class:"text-slate-600 text-sm leading-6 px-4"},Pe=o("p",{class:"font-semibold text-grey-900 dark:text-slate-300 leading-8"},"概要",-1),Ee=["onClick"],Ne={key:1,class:"text-slate-400 text-sm"},Ue=o("p",null,"nothing",-1),We=[Ue],ze={__name:"TableOfContent",props:{editor:{type:Object,default:()=>({})},anchors:{type:Array,default:()=>[]}},setup(n){const t=ye(),e=be(),l=n,u=f=>{if(l.editor){const r=l.editor.view.dom.querySelector(`[data-toc-id="${f.id}"`);if(!r)return;l.editor.view.posAtDOM(r,0);const a=l.editor.view.state.tr;a.setSelection(new xe(a.doc.resolve(f.pos||0))),l.editor.view.dispatch(a),l.editor.view.focus(),t.replace({path:e.path,params:e.params,query:{appId:e.query.appId,anchorId:f.id}}),window.scrollTo({top:r.getBoundingClientRect().top+window.scrollY-64,behavior:"smooth"})}};return L(()=>e.query.anchorId,(f,r)=>{f&&f!==r&&u({id:f,pos:0})},{immediate:!0}),(f,r)=>(m(),b("div",Oe,[n.anchors&&n.anchors.length>0?(m(),b("ul",qe,[Pe,(m(!0),b(A,null,S(n.anchors,a=>(m(),b("li",{key:"item.id",class:"border-l-2",style:ve({paddingLeft:a.level+"rem"})},[o("a",{class:v(["block py-1 font-medium cursor-pointer",{"text-blue-500":a.isActive,"hover:text-blue-300":!a.isActive,"text-slate-400 dark:text-slate-200":a.isScrolledOver&&!a.isActive}]),onClick:q(g=>u(a),["stop"])},[a.level>1?(m(),H(c,{key:0,name:"arrow-right-s-line"})):T("",!0),ke(" "+w(a.textContent),1)],10,Ee)],4))),128))])):(m(),b("div",Ne,We))]))}},je=ze,Fe={class:"cursor-pointer"},Ke={class:"shadow-lg bg-white rounded-lg p-1 w-min-48"},Ye=["onClick"],O={__name:"Dropdown",props:{title:{type:String,default:""},options:{type:Array,default:()=>[]},placement:{type:String,default:"bottom"},trigger:{type:String,default:"click"},offset:{type:Array,default:()=>[0,10]}},emits:["select"],setup(n,{emit:t}){const e=()=>document.body,l=x(),u=x(!0),f=t,r=h=>{var y;f("select",h),(y=l==null?void 0:l.value)==null||y.hide(),console.log(h)},a=()=>(u.value=!1,!0),g=()=>(u.value=!0,!0);return(h,y)=>{const p=_("tippy");return m(),H(p,{ref_key:"dropdown",ref:l,trigger:n.trigger,placement:n.placement,offset:n.offset,animation:"scale",interactive:!0,appendTo:e,onShow:a,onHide:g},{content:k(()=>[B(h.$slots,"content",{},()=>[o("div",Ke,[o("ul",null,[(m(!0),b(A,null,S(n.options,i=>(m(),b("li",{key:i.value},[B(h.$slots,"item",{item:i},()=>[o("div",{class:"h-8 leading-8 px-2 rounded mb-1 hover:bg-gray-100 cursor-pointer text-gray-500",onClick:q($=>r(i),["stop"])},w(i.label),9,Ye)])]))),128))])])])]),default:k(()=>[o("div",null,[B(h.$slots,"title",{},()=>[o("span",Fe,w(n.title),1)]),s(c,{class:"text-xs ml-1 text-gray-500",name:u.value?"arrow-down-s-line":"arrow-up-s-line"},null,8,["name"])])]),_:3},8,["trigger","placement","offset"])}}},Ge=["onClick"],Ze={class:"ml-2"},Xe=["onClick"],Je={class:"ml-2"},Qe=o("div",{class:"my-2 border-l border-gray-300"},null,-1),et=["disabled"],tt=["disabled"],nt=["disabled"],ot=["disabled"],at={class:"flex flex-row shadow-lg bg-white rounded-lg p-1"},it={for:"link",class:"mr-2"},lt=["disabled"],rt={__name:"BubbleMenu",props:{editor:{type:Object,default:null}},setup(n){const t=()=>document.body,e=n,l=x(""),u=x(),f=[{value:"heading1",label:"Heading 1",level:1,icon:"h-1"},{value:"heading2",label:"Heading 2",level:2,icon:"h-2"},{value:"heading3",label:"Heading 3",level:3,icon:"h-3"},{value:"heading4",label:"Heading 4",level:4,icon:"h-4"},{value:"heading5",label:"Heading 5",level:5,icon:"h-5"},{value:"heading6",label:"Heading 6",level:6,icon:"h-6"}],r=[{value:"bulletList",label:"Bullet list",icon:"list-unordered",command:"toggleBulletList"},{value:"orderedList",label:"Ordered list",icon:"list-ordered-2",command:"toggleOrderedList"},{value:"taskList",label:"Task list",icon:"list-check-3",command:"toggleTaskList"}],a=()=>{let p=e.editor.getAttributes("link").href;return l.value=p,!0},g=()=>!0,h=()=>{var i;let p=l.value;p===""?e.editor.chain().focus().extendMarkRange("link").unsetLink().run():e.editor.chain().focus().extendMarkRange("link").setLink({href:p}).run(),l.value="",(i=u==null?void 0:u.value)==null||i.hide()},y=()=>{var M,V;let{doc:p,selection:i}=((V=(M=e.editor)==null?void 0:M.view)==null?void 0:V.state)||{},{from:$,to:d}=i||{},C=p.textBetween(i.from,i.to,`
`);($===d||!C)&&Me.warning("请选择要翻译的文本！");const I=new RegExp(/^[a-zA-Z/s]*$/).test(C);_e({query:C,from:I?"en":"zh-CHS",to:I?"zh-CHS":"en"}).then(N=>{let D=N.translation;D!==C&&e.editor.commands.insertContentAt(d,`<em>[翻译：${D}]</em>`)})};return(p,i)=>{const $=_("tippy");return n.editor?(m(),H(R(U),{key:0,editor:n.editor,class:"flex flex-wrap shadow-lg p-1 rounded-md bg-white text-gray-500 font-semibold",tippyOptions:{maxWidth:"none"}},{default:k(()=>[s(O,{class:"mx-1 px-2 py-1 rounded-lg hover:bg-gray-100 cursor-pointer",options:f},{title:k(()=>[s(c,{name:"heading"})]),item:k(({item:d})=>[o("div",{class:v(["h-8 leading-8 px-2 rounded mb-1 hover:bg-gray-100 cursor-pointer text-gray-500",{"bg-gray-200":n.editor.isActive("heading",{level:d.level})}]),onClick:C=>n.editor.chain().focus().toggleHeading({level:d.level}).run()},[s(c,{name:d.icon},null,8,["name"]),o("span",Ze,w(d.label),1)],10,Ge)]),_:1}),s(O,{class:"mx-1 px-2 py-1 rounded-lg hover:bg-gray-100 cursor-pointer",options:r},{title:k(()=>[s(c,{name:"menu-line"})]),item:k(({item:d})=>[o("div",{class:v(["h-8 leading-8 px-2 rounded mb-1 hover:bg-gray-100 cursor-pointer text-gray-500",{"bg-gray-200":n.editor.isActive(d.value)}]),onClick:C=>n.editor.chain().focus()[d.command]().run()},[s(c,{name:d.icon},null,8,["name"]),o("span",Je,w(d.label),1)],10,Xe)]),_:1}),Qe,o("div",{class:v(["mx-1 px-2 py-1 rounded-lg hover:bg-gray-100 cursor-pointer",{"bg-gray-200":n.editor.isActive("bold")}]),onClick:i[0]||(i[0]=d=>n.editor.chain().focus().toggleBold().run()),disabled:!n.editor.can().chain().focus().toggleBold().run()},[s(c,{name:"bold"})],10,et),o("div",{class:v(["mx-1 px-2 py-1 rounded-lg hover:bg-gray-100 cursor-pointer",{"bg-gray-200":n.editor.isActive("italic")}]),onClick:i[1]||(i[1]=d=>n.editor.chain().focus().toggleItalic().run()),disabled:!n.editor.can().chain().focus().toggleItalic().run()},[s(c,{name:"italic"})],10,tt),o("div",{class:v(["mx-1 px-2 py-1 rounded-lg hover:bg-gray-100 cursor-pointer",{"bg-gray-200":n.editor.isActive("underline")}]),onClick:i[2]||(i[2]=d=>n.editor.chain().focus().toggleUnderline().run()),disabled:!n.editor.can().chain().focus().toggleUnderline().run()},[s(c,{name:"underline"})],10,nt),o("div",{class:v(["mx-1 px-2 py-1 rounded-lg hover:bg-gray-100 cursor-pointer",{"bg-gray-200":n.editor.isActive("strike")}]),onClick:i[3]||(i[3]=d=>n.editor.chain().focus().toggleStrike().run()),disabled:!n.editor.can().chain().focus().toggleStrike().run()},[s(c,{name:"strikethrough"})],10,ot),s($,{ref_key:"linkDropdown",ref:u,trigger:"click",placement:"bottom",offset:[0,10],animation:"scale",interactive:!0,appendTo:t,onShow:a,onHide:g,maxWidth:"none"},{content:k(()=>[o("div",at,[o("label",it,[P(o("input",{type:"text",id:"link","onUpdate:modelValue":i[4]||(i[4]=d=>l.value=d),class:"p-2 rounded-lg",placeholder:"https://"},null,512),[[E,l.value]])]),o("button",{class:"w-full px-2 my-1 rounded-lg bg-purple-500 text-white",onClick:h},"set")])]),default:k(()=>[o("div",{class:v(["mx-1 px-2 py-1 rounded-lg hover:bg-gray-100 cursor-pointer",{"bg-gray-200":n.editor.isActive("link")}])},[s(c,{name:"link"})],2)]),_:1},512),o("div",{class:v(["mx-1 px-2 py-1 rounded-lg hover:bg-gray-100 cursor-pointer",{"bg-gray-200":n.editor.isActive("paragraph")}]),onClick:i[5]||(i[5]=d=>n.editor.chain().focus().setParagraph().run())},[s(c,{name:"paragraph"})],2),o("div",{class:v(["mx-1 px-2 py-1 rounded-lg hover:bg-gray-100 cursor-pointer",{"bg-gray-200":n.editor.isActive("code")}]),onClick:i[6]||(i[6]=d=>n.editor.chain().focus().toggleCode().run()),disabled:!n.editor.can().chain().focus().toggleCode().run()},[s(c,{name:"code-view"})],10,lt),o("div",{class:v(["mx-1 px-2 py-1 rounded-lg hover:bg-gray-100 cursor-pointer",{"bg-gray-200":n.editor.isActive("codeBlock")}]),onClick:i[7]||(i[7]=d=>n.editor.chain().focus().toggleCodeBlock().run())},[s(c,{name:"code-block"})],2),o("div",{class:"mx-1 px-2 py-1 rounded-lg hover:bg-gray-100 cursor-pointer",onClick:i[8]||(i[8]=d=>n.editor.chain().focus().toggleBlockquote().run())},[s(c,{name:"quote-text"})]),o("div",{class:"mx-1 px-2 py-1 rounded-lg hover:bg-gray-100 cursor-pointer",onClick:i[9]||(i[9]=d=>n.editor.chain().focus().setHorizontalRule().run())},[s(c,{name:"separator"})]),o("div",{class:"mx-1 px-2 py-1 rounded-lg hover:bg-gray-100 cursor-pointer",onClick:i[10]||(i[10]=d=>n.editor.chain().focus().setHardBreak().run())},[s(c,{name:"text-wrap"})]),o("div",{class:"mx-1 px-2 py-1 rounded-lg hover:bg-gray-100 cursor-pointer",onMousedown:y},[s(c,{name:"translate"})],32)]),_:1},8,["editor"])):T("",!0)}}},st=rt,dt=W.create({name:"commands",addOptions(){return{suggestion:{char:"/",command:({editor:n,range:t,props:e})=>{e.command({editor:n,range:t})}}}},addProseMirrorPlugins(){return[z({editor:this.editor,...this.options.suggestion})]}}),ct={components:{RemixIcon:c},props:{items:{type:Array,required:!0},command:{type:Function,required:!0}},data(){return{selectedIndex:0}},watch:{items(){this.selectedIndex=0}},methods:{onKeyDown({event:n}){return n.stopPropagation(),n.key==="ArrowUp"?(this.upHandler(),!0):n.key==="ArrowDown"?(this.downHandler(),!0):n.key==="Enter"?(this.enterHandler(),!0):!1},upHandler(){this.selectedIndex=(this.selectedIndex+this.items.length-1)%this.items.length},downHandler(){this.selectedIndex=(this.selectedIndex+1)%this.items.length},enterHandler(){this.selectItem(this.selectedIndex)},selectItem(n){const t=this.items[n];t&&this.command(t)}}},ut={class:"relative border border-slate-300/20 rounded overflow-hidden p-2 bg-white shadow-md min-w-56"},gt=["onClick"],mt={class:"ml-2"},ht={key:1,class:"block px-2 w-full text-left"};function ft(n,t,e,l,u,f){const r=_("RemixIcon");return m(),b("div",ut,[e.items.length?(m(!0),b(A,{key:0},S(e.items,(a,g)=>(m(),b("div",{key:g,class:v(["h-8 leading-8 px-2 rounded mb-1 hover:bg-gray-100 cursor-pointer text-gray-600",{"bg-gray-200":g===u.selectedIndex}]),onClick:h=>f.selectItem(g)},[s(r,{name:a.icon},null,8,["name"]),o("span",mt,w(a.title),1)],10,gt))),128)):(m(),b("div",ht," No result "))])}const pt=Ve(ct,[["render",ft]]),yt={items:({query:n})=>[{title:"Ai Write",key:"aiWrite",icon:"ai-generate",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).setAiWrite().run()}},{title:"Heading 1",key:"H1",icon:"h-1",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleHeading({level:1}).run()}},{title:"Heading 2",key:"H2",icon:"h-2",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleHeading({level:2}).run()}},{title:"Heading 3",key:"H3",icon:"h-3",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleHeading({level:3}).run()}},{title:"Bold",key:"bold",icon:"bold",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleBold().run()}},{title:"Italic",key:"italic",icon:"italic",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleItalic().run()}},{title:"Underline",key:"underline",icon:"underline",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleUnderline().run()}},{title:"Strikethrough",key:"strike",icon:"strikethrough",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleStrike().run()}},{title:"Heading 4",key:"H4",icon:"h-4",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleHeading({level:4}).run()}},{title:"Heading 5",key:"H5",icon:"h-5",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleHeading({level:5}).run()}},{title:"Heading 6",key:"H6",icon:"h-6",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleHeading({level:6}).run()}},{title:"Paragraph",key:"paragraph",icon:"paragraph",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleParagraph().run()}},{title:"Highlight",key:"highlight",icon:"highlight",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleHighlight().run()}},{title:"Bullet List",key:"bulletList",icon:"list-unordered",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleBulletList().run()}},{title:"Ordered List",key:"orderedList",icon:"list-ordered-2",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleOrderedList().run()}},{title:"Code Line",key:"code",icon:"code-view",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleCode().run()}},{title:"Code Block",key:"codeBlock",icon:"code-block",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleCodeBlock().run()}},{title:"Blockquote",key:"blockquote",icon:"quote-text",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleBlockquote().run()}},{title:"Horizontal",key:"horizontal",icon:"separator",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).setHorizontalRule().run()}},{title:"Hard Break",key:"hardBreak",icon:"text-wrap",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).setHardBreak().run()}},{title:"Task List",key:"task",icon:"list-check-3",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleTaskList().run()}},{title:"Table",key:"insertTable",icon:"table-2",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).insertTable({rows:3,cols:3,withHeaderRow:!1}).run()}},{title:"Column Before",key:"addTableColumnBefore",icon:"insert-column-left",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).addColumnBefore().run()}},{title:"Column After",key:"addTableColumnAfter",icon:"insert-column-right",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).addColumnAfter().run()}},{title:"Delete Column",key:"deleteTableColumn",icon:"delete-column",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).deleteColumn().run()}},{title:"Row Before",key:"addTableRowBefore",icon:"insert-row-top",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).addRowBefore().run()}},{title:"Row After",key:"addTableRowAfter",icon:"insert-row-bottom",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).addRowAfter().run()}},{title:"Delete Row",key:"deleteTableRow",icon:"delete-row",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).deleteRow().run()}},{title:"Delete Table",key:"deleteTable",icon:"delete-bin-4-line",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).deleteTable().run()}},{title:"Delete Node",key:"deleteNode",icon:"delete-bin-2-line",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).deleteNode().run()}},{title:"Clear Marks",key:"clearMarks",icon:"eraser-line",command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).unsetAllMarks().run()}}].filter(t=>t.title.toLowerCase().includes(n.toLowerCase())||t.key.toLowerCase().includes(n.toLowerCase())).slice(0,10),render:()=>{let n,t;return{onStart:e=>{n=new j(pt,{props:e,editor:e.editor}),e.clientRect&&(t=we("body",{getReferenceClientRect:e.clientRect,appendTo:()=>document.body,content:n.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"}))},onUpdate(e){n.updateProps(e),e.clientRect&&t[0].setProps({getReferenceClientRect:e.clientRect})},onKeyDown(e){var l;return e.event.key==="Escape"?(t[0].hide(),!0):(l=n==null?void 0:n.ref)==null?void 0:l.onKeyDown(e)},onExit(){t[0].destroy(),n.destroy()}}}},bt={class:"flex flex-col bg-gray-100 m-1 p-4 rounded-md"},vt={key:0,class:"w-full mt-1"},kt=o("div",{class:"text-gray-600 mb-2 px-1 text-sm"},"Preview",-1),xt=["innerHTML"],wt={class:"mt-1",for:"question"},Ct=o("div",{class:"text-gray-600 mb-2 px-1 text-sm"},"Prompt",-1),Rt={class:"flex flex-row"},Ht=o("span",null,"insert context",-1),$t=o("span",null,"discard",-1),Tt={class:"flex-1 flex justify-end"},At=["disabled"],Bt={class:"ml-2"},Lt={__name:"AiWriteView",props:F,setup(n){const t=n,e=x(""),l=x(""),u=x(!1),f=()=>{if(!e.value)return;let g="";u.value=!0,Ie({question:e.value,autoSave:!1},h=>{g+=h,l.value=Ce(g),Re(()=>{const y=document.getElementById("response");y&&y.scrollTo({top:y.scrollHeight,behavior:"smooth"})})},()=>{g="",u.value=!1})},r=()=>{t.editor.commands.insertContent(l.value)},a=()=>{t.deleteNode()};return(g,h)=>(m(),H(R(K),null,{default:k(()=>[o("div",bt,[l.value?(m(),b("div",vt,[kt,o("span",{id:"response",class:"inline-block w-full max-w-full max-h-80 bg-white p-2 border border-slate-300/20 rounded-md prose dark:prose-invert tiptap overflow-y-auto",innerHTML:l.value},null,8,xt)])):T("",!0),o("label",wt,[Ct,P(o("textarea",{id:"question",name:"question",class:"px-2 rounded-md w-full border border-slate-300/20 font-medium focus:outline-none focus:ring-none",rows:"3","onUpdate:modelValue":h[0]||(h[0]=y=>e.value=y)},null,512),[[E,e.value]])]),o("div",Rt,[o("div",null,[l.value?(m(),b("button",{key:0,class:"bg-slate-500 hover:bg-slate-700 text-white py-1 px-2 rounded-md mr-2",onClick:r},[s(c,{class:"mr-2",name:"add-fill"}),Ht])):T("",!0),o("button",{class:"bg-slate-500 hover:bg-slate-700 text-white py-1 px-2 rounded-md",onClick:a},[s(c,{class:"mr-2",name:"delete-bin-line"}),$t])]),o("div",Tt,[o("button",{class:"bg-purple-500 hover:bg-purple-700 text-white py-1 px-2 rounded-md justify-self-end",onClick:f,disabled:u.value},[u.value?(m(),H(c,{key:0,class:"inline-block animate-spin duration-300",name:"loader-3-fill"})):(m(),H(c,{key:1,name:"send-plane-fill"})),o("span",Bt,w(u.value?"process":"generate"),1)],8,At)])])])]),_:1}))}},St=Lt,_t=Y.create({name:"aiWrite",group:"block",atom:!0,addAttributes(){return{}},parseHTML(){return[{tag:'div[data-type="aiWrite"]'}]},renderHTML({HTMLAttributes:n}){return["div",G(n,{"data-type":"aiWrite"})]},addNodeView(){return Z(St)},addCommands(){return{setAiWrite:n=>({commands:t})=>t.insertContent({type:this.name,attrs:n})}}}),It={id:"editorWrapper",class:"min-w-0 flex-auto px-4 sm:px-6 xl:px-8 py-10 xl:mr-80"},Mt={id:"tableOfContent",class:"fixed z-20 top-[3.8125rem] bottom-0 right-0 py-10 overflow-y-auto hidden xl:text-sm xl:block flex-none w-80 px-8"},zt=He({__name:"Markdown",props:{modelValue:String,editable:{type:Boolean,default:!0},anchors:Array},emits:["update:modelValue","update:anchors"],setup(n,{emit:t}){const e=$e();e.register({html:Te,css:Ae,js:Be,ts:Le});const l=n,u=t,f=De(a=>{u("update:modelValue",a.getHTML())},300),r=X({autofocus:!0,editable:l.editable,content:l.modelValue,editorProps:{attributes:{class:"prose dark:prose-invert w-full max-w-full focus:outline-none"}},extensions:[J,Q.configure({document:!1}),ee,te,ne,oe,ae.configure({openOnClick:!1,defaultProtocol:"https"}),ie,le.configure({nested:!0}),re.configure({lowlight:e}),se.configure({onUpdate:a=>{u("update:anchors",a)}}),de.configure({emptyEditorClass:"is-editor-empty",placeholder:()=>"Type / to browse options"}),ce.configure({inline:!0,allowBase64:!0}),ue.configure({allowedMimeTypes:["image/png","image/jpeg","image/gif","image/webp"],onDrop:(a,g,h)=>{g.forEach(y=>{const p=new FileReader;p.readAsDataURL(y),p.onload=()=>{a.chain().insertContentAt(h,{type:"image",attrs:{src:p.result}}).focus().run()}})},onPaste:(a,g,h)=>{g.forEach(y=>{if(h)return console.log(h),!1;const p=new FileReader;p.readAsDataURL(y),p.onload=()=>{a.chain().insertContentAt(a.state.selection.anchor,{type:"image",attrs:{src:p.result}}).focus().run()}})}}),dt.configure({suggestion:yt}),ge.configure({resizable:!0}),me,he,fe,_t],onUpdate:({editor:a})=>{f(a)}});return L(()=>l.modelValue,a=>{r.value&&r.value.getHTML()===a||r.value&&r.value.commands.setContent(a||"",!0)}),L(()=>l.editable,(a,g)=>{a!==g&&(r.value&&r.value.setEditable(a),a&&r.value&&r.value.commands.focus())}),Se(()=>{r.value&&r.value.destroy()}),(a,g)=>(m(),b(A,null,[o("div",It,[s(st,{editor:R(r)},null,8,["editor"]),s(R(pe),{class:"h-full",editor:R(r)},null,8,["editor"])]),o("div",Mt,[s(je,{editor:R(r),anchors:n.anchors},null,8,["editor","anchors"])])],64))}});export{zt as default};
